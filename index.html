<!DOCTYPE html>
<html lang="en-EG">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIBE TREATS - Too Lazy To Bake?</title>
    <link rel="icon" href="logo.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">

    <!-- Your main CSS -->
    <link rel="stylesheet" href="style.css"> <!-- ** Make sure this name is correct ** -->

    <!-- Leaflet Map CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- Leaflet Geocoder Plugin CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

    <!-- Add any other meta tags or head elements here -->
    <meta name="description" content="Too lazy to bake? Same. Order my viral TikTok treats instead. Baked with chaotic energy and premium ingredients. Delivering in Egypt (New Cairo & Nasr City).">
    <style>
        /* Style for immediate location feedback */
        #location-status.status-ok { color: #28a745; /* Green */ }
        #location-status.status-error { color: #dc3545; /* Red */ }
        #location-status.status-pending { color: #6c757d; /* Grey */ }
        .map-container.input-error { border-color: #dc3545; }

        /* Style adjustments for new form fields */
        .address-details-group {
            padding: 10px;
            background-color: #fdf6fa; /* Light pinkish background */
            border: 1px dashed var(--brand-pink-light);
            border-radius: var(--radius-small);
            margin-bottom: 1rem;
        }
        .address-details-group label {
           font-weight: 600;
           font-size: 0.9em;
           color: var(--text-dark);
           margin-bottom: 0.3rem;
           display: block; /* Ensure labels are on their own line */
        }
        .address-details-group input[type="text"] {
            width: 100%; /* Make inputs take full width within the group */
            margin-bottom: 0.5rem; /* Add spacing between inputs */
            padding: 0.6rem;
            border: 1px solid #ccc;
            border-radius: var(--radius-small);
            font-size: 0.95em;
        }
        .address-details-group input[type="text"]::placeholder {
            color: #999;
            font-style: italic;
        }
         /* Make Find Me button visually distinct but smaller */
        .small-button {
            padding: 0.4rem 0.8rem;
            font-size: 0.85em;
            line-height: 1;
            vertical-align: middle; /* Align icon and text */
        }
        .small-button svg {
             width: 14px; height: 14px; margin-right: 4px; vertical-align: text-bottom;
        }
         /* Ensure Leaflet layer control is visible */
        .leaflet-control-layers {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 5px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.4);
            padding: 6px 8px;
        }
        .leaflet-control-layers-base label {
             display: flex; /* Align radio button and text */
             align-items: center;
             margin-bottom: 4px;
        }
         .leaflet-control-layers-base label span {
            margin-left: 6px; /* Space between radio and label text */
         }
    </style>
</head>
<body>

    <!-- ============================ HEADER ============================ -->
    <header class="site-header">
        <div class="container header-container">
            <div class="logo-area">
                <img src="logo.png" alt="Vibe Treats Logo" class="logo-main">
            </div>
            <nav class="main-nav" aria-label="Main Navigation">
                <a href="#treats" class="nav-link">The Goods</a>
                <a href="#the-real-tea" class="nav-link">The Tea</a>
                <a href="#tiktok-vibe" class="nav-link">My Origin Story</a>
            </nav>
            <button id="cart-button" class="cart-toggle-button button-style-primary">
                üõí Cart (<span id="cart-count">0</span>)
            </button>
            <button class="mobile-menu-toggle" aria-label="Toggle Menu">‚ò∞</button>
        </div>
    </header>

    <!-- ============================ MAIN CONTENT ============================ -->
    <main>

        <!-- ============================ HERO SECTION ============================ -->
        <section id="hero" class="hero-section">
            <div class="container hero-container">
                <div class="hero-text animate-on-load slide-in-left">
                    <h1 class="hero-headline">
                        <span>WHY</span>
                        <span>DON'T</span>
                        <span>YOU SAY</span>
                        <span>SOOO GOOD?</span>
                    </h1>
                    <p class="hero-subheadline">i got you bestie ‚ú®</p>
                    <p class="hero-description">tired of watching my recipes but never making them? same. just order them instead and we can both pretend you have the motivation to bake. premium ingredients + unhinged energy = these treats that are actually worth your money. üëè </p>
                    <a href="#treats" class="cta-button hero-cta animate-bounce">shop now or whatever üëá</a>
                </div>
                <div class="hero-visual animate-on-load fade-in">
                    <img src="hero-image-placeholder.png" alt="Delicious Vibe Treats cookies" class="hero-main-image">
                </div>
            </div>
        </section>

        <!-- ====================== FEATURED TIKTOK SECTION ======================= -->
        <section id="tiktok-vibe" class="tiktok-feature-section dark-section">
             <div class="container">
               <h2 class="section-title animate-on-scroll fade-in">before you ask: yes, these are THE cookies</h2>
               <p class="section-subtitle animate-on-scroll fade-in delay-1">from the FYP to your mouth. no literally. i make these.</p>
               <div class="tiktok-embed-wrapper animate-on-scroll fade-in delay-2">
                 <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@omarisavibe/video/7370664694153006337" data-video-id="7370664694153006337" style="max-width: 500px; min-width: 300px;">
                   <section> <a target="_blank" title="@omarisavibe" href="https://www.tiktok.com/@omarisavibe?refer=embed">@omarisavibe</a> <p>Watch me try not to burn your legendary treats üî•</p> <a target="_blank" title="‚ô¨ original sound - omarisavibe" href="https://www.tiktok.com/music/original-sound-7370664761363368705?refer=embed">‚ô¨ original sound - omarisavibe</a> </section> </blockquote> <script async src="https://www.tiktok.com/embed.js"></script>
               </div>
               <p class="follow-link animate-on-scroll fade-in delay-3">
                 more unhinged baking moments at <a href="https://tiktok.com/@omarisavibe" target="_blank" rel="noopener noreferrer">@OmarIsAVibe</a> (follow or i'll cry)
               </p>
             </div>
           </section>

        <!-- ========================= PRODUCTS SECTION ========================= -->
        <section id="treats" class="product-section">
            <div class="container">
                <h2 class="section-title animate-on-scroll fade-in">THE MENU</h2>
                <p class="section-subtitle animate-on-scroll fade-in delay-1">(stock = whenever i feel like baking, so grab them fast)</p>
                <div class="product-grid" id="product-grid">
                    <p class="loading-msg" id="loading-indicator">loading... pls don't refresh or i'll cry</p>
                    <!-- Products Load Here -->
                </div>
            </div>
        </section>

        <!-- ====================== "NUTRITIONAL" / INFO PANEL ====================== -->
        <section id="the-real-tea" class="info-panel-section">
            <div class="container info-panel-container">
                <!-- LEFT SIDE PANEL -->
                <div class="info-panel side-panel handle-care-panel animate-on-scroll slide-in-left">
                    <img src="panel-handle-no-care.png" alt="Handle (No) Care Panel" class="info-panel-graphic">
                    <h3 class="panel-title">handle with care or don't idc</h3>
                    <p>these cookies will survive the apocalypse but not your hangry roommate. hide them well besties.</p>
                    <p><strong>actual product:</strong> the famous brown butter cookies you've been screenshotting</p>
                    <p>available when i'm not having a breakdown xoxo</p>
                </div>
                <!-- CENTER PANEL -->
                <div class="info-panel nutritional-facts-panel animate-on-scroll fade-in delay-1">
                     <h3 class="panel-title">Nutritional(ly) Facts</h3>
                     <p class="serving-info">Serving Size: 1 Cookie (LOL, yeah right)</p>
                     <p class="serving-info">Servings Per Container: Approx. 6 (If you're weak)</p>
                     <div class="facts-table">
                         <div class="fact-row header"><span></span><span><strong>% Daily Vibe*</strong></span></div>
                         <div class="fact-row"><span><strong>Deliciousness</strong></span><span><strong>1000%</strong></span></div>
                         <div class="fact-row"><span>Serotonin Boost</span><span>200%</span></div>
                         <div class="fact-row"><span>Regret (Post-Binge)</span><span>200%</span></div>
                         <div class="fact-row"><span>Chance of Sharing</span><span>0%</span></div>
                         <div class="fact-row dense"><span>Chance of Immediately Ordering More</span><span>At least 1%</span></div>
                     </div>
                     <p class="facts-footer">*Not FDA Approved. Or APA approved. Or approved by any sane adult. We tried 'em tho.</p>
                     <p class="facts-footer">Approved by teething toddlers and questionable judgement.</p>
                 </div>
                 <!-- RIGHT SIDE PANEL -->
                 <div class="info-panel side-panel why-say-so-panel">
                     <img src="panel-why-dont-you-say-so.png" alt="Why Dont You Say So Panel" class="info-panel-graphic">
                     <h3 class="panel-title">vibe check report:</h3>
                     <p><strong>SCORE:</strong> ate and left no crumbs / literally</p>
                     <h4>perfect pairing ideas:</h4>
                     <ul>
                         <li>scrolling through instagram at 3am</li>
                         <li>ghosting someone who asked for the recipe</li>
                         <li>watching your bank account cry</li>
                         <li>convincing yourself this counts as "self-care"</li>
                         <li>ice cold milk (obviously)</li>
                     </ul>
                     <p class="disclaimer">*written while in my feels after eating the entire batch</p>
                 </div>
            </div>
            <!-- DEETS DRAMA SECTION -->
             <div class="container deets-drama-container animate-on-scroll fade-in">
                 <h2 class="section-title alternate">the tea you didn't ask for</h2>
                 <div class="drama-columns">
                     <div class="drama-column ingredients-column">
                         <h3>what's actually in these? <span class="highlight">(receipts)</span></h3>
                         <p>high quality only, bestie: Flour, Butter, Sugar, Free-range Eggs, Premium Chocolate, Vanilla, Salt.</p>
                         <p>also contains: my tears, the sound of my mom asking when i'll get a real job, and the three hours of sleep i got before baking these.</p>
                      </div>
                      <div class="drama-column storage-column">
                          <h3>how long will these last?</h3>
                          <p><strong>shelf life:</strong> lol you're not gonna need to worry about that</p>
                          <ul>
                              <li><strong>best before:</strong> you'll inhale these before checking expiry dates, trust</li>
                              <li><strong>storage tips:</strong> hide them from your siblings/roommates/parents/self at 2am. airtight container if you have self-control (suspicious). freezable if you're a psychopath who "saves treats for later".</li>
                          </ul>
                          <h3>allergen tea</h3>
                          <p>contains: gluten, dairy, eggs, and my chaotic energy. may contain nuts (both the ingredient and my mental state while baking). made in a kitchen where someone regularly has meltdowns. if you have allergies, maybe just enjoy my tiktoks instead?</p>
                     </div>
                 </div>
            </div>
        </section>
    </main>

    <!-- ============================ FOOTER ============================ -->
    <footer class="site-footer">
        <div class="container">
            <p class="copyright">¬© <span id="year">2024</span> VIBE TREATS. not responsible for addiction.</p>
            <p class="footer-tagline">made with zero sleep and premium ingredients.</p>
            <p class="footer-smallprint">side effects: happiness, telling everyone, sliding into DMs.</p>
             <a href="admin-login.html" class="admin-secret-link" target="_blank" title="Admin Zone">üë®‚Äçüíª</a>
        </div>
    </footer>

    <!-- ======================= CART SIDEBAR & OVERLAY ======================= -->
    <div id="cart-overlay" class="cart-overlay"></div>
    <div id="cart-sidebar" class="cart-sidebar">
        <button id="close-cart-button" class="close-modal-button" aria-label="Close Cart">√ó</button>
        <h2 class="sidebar-title">YOUR STASH üç™</h2>
        <div id="cart-items" class="cart-items-container">
            <p class="cart-empty-message">empty cart? that's embarrassing.</p>
        </div>
        <div class="cart-summary-section">
            <p class="cart-total-text">total damage: <span id="cart-total-price">LE 0.00</span></p>
            <button id="checkout-button" class="cta-button checkout-btn" disabled>checkout (no regrets)</button>
        </div>
    </div>

    <!-- ===================== CHECKOUT MODAL & OVERLAY ===================== -->
    <div id="checkout-overlay" class="checkout-overlay">
        <div id="checkout-modal" class="checkout-modal">
            <button id="close-checkout-button" class="close-modal-button" aria-label="Close Checkout">√ó</button>
            <h2 class="modal-title">drop your deets</h2>

            <form id="checkout-form" novalidate>
                <!-- 1. Basic Info -->
                <div class="form-group">
                    <label for="customer_name">your name / social handle:</label>
                    <input type="text" id="customer_name" name="customer_name" placeholder="who's the main character here?" required>
                </div>

                <div class="form-group">
                    <label for="customer_phone">phone # (that actually works):</label>
                    <input type="tel" id="customer_phone" name="customer_phone" placeholder="01xxxxxxxxx" required pattern="^01[0-2,5]{1}[0-9]{8}$">
                    <small class="form-hint">so the delivery person can find you when they're lost</small>
                </div>

                <!-- 2. Leaflet Map Section -->
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 10px;">
                        <label for="map-container" style="margin-bottom: 0;">Delivery Location (Pin or Search):</label>
                        <button type="button" id="find-me-button" class="button-style-secondary small-button" title="Find My Current Location">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
                              <path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
                            </svg>
                             Find Me
                        </button>
                    </div>
                    <p style="font-size: 0.85em; margin-bottom: 0.5rem; color: #555;">
                        Use Satellite view (top right corner of map) to see buildings! Click/tap map, search, or use 'Find Me'.
                        <strong style="color: var(--brand-pink); display: block; margin-top: 3px;">üìç Delivery ONLY in <strong style="text-decoration: underline;">New Cairo</strong> & <strong style="text-decoration: underline;">Nasr City</strong>.</strong>
                    </p>
                    <!-- Map Container -->
                    <div id="map-container" class="map-container" style="height: 300px; width: 100%; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: var(--radius-small); background-color: #f9f9f9; position: relative;">
                        <!-- Map will be loaded here by Leaflet -->
                        <!-- The Geocoder search box will be added here by the plugin -->
                        <!-- Layer control will be added here -->
                        <p style="text-align:center; padding-top: 50px; color: #888; position: absolute; top: 0; left: 0; width: 100%; z-index: 0;">Loading map...</p>
                    </div>
                    <!-- Location Status Message -->
                    <p id="location-status" class="status-pending" style="text-align: center; font-weight: bold; min-height: 1.5em; margin-bottom: 1rem;">Please pin or search for your location.</p>
                    <!-- Hidden inputs to store coordinates -->
                    <input type="hidden" id="customer_latitude" name="customer_latitude" required>
                    <input type="hidden" id="customer_longitude" name="customer_longitude" required>
                </div>

                <!-- 3. ** NEW ** Address Details Section -->
                <div class="form-group address-details-group">
                    <h4 style="margin-bottom: 0.75rem; font-size: 1rem; color: var(--brand-pink);">Help the driver find you:</h4>
                    <label for="building_details">Building Name / Number / Villa Number:</label>
                    <input type="text" id="building_details" name="building_details" placeholder="e.g., Villa 123, Building 7A">

                    <label for="floor_apt">Floor & Apartment Number (if applicable):</label>
                    <input type="text" id="floor_apt" name="floor_apt" placeholder="e.g., Floor 3, Apt 302">

                    <label for="landmarks">Nearby Landmarks / Delivery Notes:</label>
                    <input type="text" id="landmarks" name="landmarks" placeholder="e.g., Next to Seoudi market, call upon arrival">
                     <small class="form-hint" style="margin-top: 0.2rem; display: block;">More details = faster delivery!</small>
                </div>
                <!-- ** END: Address Details Section ** -->


                <!-- 4. Summary Elements -->
                <div class="checkout-summary-box">
                    <h4 class="summary-title" style="font-size: 1.1rem; margin-bottom: 0.5rem;">Quick Look:</h4>
                    <div id="checkout-summary" style="max-height: 80px; overflow-y: auto;">
                        <p style="font-style: italic; color: var(--text-grey); font-size: 0.9rem;">Cart summary appears here...</p>
                    </div>
                    <p class="total-title" style="margin-top: 0.5rem; font-size: 1.2rem;">Total: <span id="checkout-total-price">LE 0.00</span></p>
                </div>

                <!-- 5. Payment Instructions -->
                <div class="telda-payment-instructions">
                    <img src="images.png" alt="Telda Logo" class="telda-logo">
                    <h4>Option 1: Pay with Telda</h4>
                    <p>Send the total (<span id="telda-total-price-reminder" class="payment-total-reminder">LE 0.00</span>) via Telda to:</p>
                    <p class="telda-username-wrapper">
                        <span class="telda-username">@omarisavibe</span>
                    </p>
                    <p class="telda-note">we'll confirm once payment pops up.</p>
                </div>

                <div class="instapay-payment-instructions">
                    <img src="unnamed.png" alt="Instapay Logo" class="instapay-logo">
                    <h4>Option 2: Pay with Instapay</h4>
                    <p>Or send the total (<span id="instapay-total-price-reminder" class="payment-total-reminder">LE 0.00</span>) via Instapay App:</p>
                    <div class="copyable-detail">
                        <label>Card Number:</label>
                        <span class="instapay-detail" id="instapay-card-number">5484460420559718</span>
                        <button type="button" class="copy-button" data-clipboard-target="#instapay-card-number" aria-label="Copy Card Number">üìã Copy</button>
                    </div>
                    <div class="copyable-detail">
                        <label>Recipient Name:</label>
                        <span class="instapay-detail" id="instapay-recipient-name">Omar Moh</span>
                        <button type="button" class="copy-button" data-clipboard-target="#instapay-recipient-name" aria-label="Copy Name">üìã Copy</button>
                    </div>
                    <p class="instapay-note">Make sure you transfer the exact amount!</p>
                </div>

                <!-- 6. Payment Method Selection -->
                <div class="form-group payment-method-selection">
                    <label>Which method did you use to pay? *</label>
                    <div class="payment-method-options">
                        <div>
                            <input type="radio" id="payment-method-telda" name="payment_method" value="Telda" required>
                            <label for="payment-method-telda">Telda (@omarisavibe)</label>
                        </div>
                        <div>
                            <input type="radio" id="payment-method-instapay" name="payment_method" value="Instapay" required>
                            <label for="payment-method-instapay">Instapay (Card Transfer)</label>
                        </div>
                    </div>
                    <small class="form-hint">Select the one you used so we can confirm faster!</small>
                </div>

                <!-- 7. Submit Button -->
                <button type="submit" id="submit-order-button" class="cta-button submit-btn">Confirm Details & Payment Method Used ‚úÖ</button>

                <!-- 8. Message Area -->
                <p id="checkout-message" class="checkout-message"></p>

            </form>
        </div>
    </div>

    <!-- ============================ SCRIPTS ============================ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Leaflet Map JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Leaflet Geocoder Plugin JS -->
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <!-- Your main JS file -->
    <script src="script.js"></script> <!-- ** Make sure this name is correct ** -->

</body>
</html>
